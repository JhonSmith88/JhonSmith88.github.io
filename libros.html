<!DOCTYPE html>
<!--[if lt IE 7]> <html class="ie6"> <![endif]-->
<!--[if IE 7]>    <html class="ie7"> <![endif]-->
<!--[if IE 8]>    <html class="ie8"> <![endif]-->
<!--[if IE 9]>    <html class="ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--><html class=""><!--<![endif]-->
  <head>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
    <meta charset="utf-8" />

    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta name="description" content="" />
    <meta name="author" content="" />

    <title>Libros - 8 de Noviembre</title>

    <!-- Standard Favicon -->
    <link rel="icon" type="image/x-icon" href="images/favicon.png" />

    <!-- For iPhone 4 Retina display: -->
    <link
      rel="apple-touch-icon-precomposed"
      sizes="114x114"
      href="images//apple-touch-icon-114x114-precomposed.png"
    />

    <!-- For iPad: -->
    <link
      rel="apple-touch-icon-precomposed"
      sizes="72x72"
      href="images//apple-touch-icon-72x72-precomposed.png"
    />

    <!-- For iPhone: -->
    <link
      rel="apple-touch-icon-precomposed"
      href="images//apple-touch-icon-57x57-precomposed.png"
    />

    <!-- Library - Google Font Familys -->

    <!-- Library - Bootstrap v3.3.5 -->
    <link rel="stylesheet" type="text/css" href="libraries/lib.css" />

    <!-- Custom - Common CSS -->
    <link rel="stylesheet" type="text/css" href="css/plugins.css" />
    <link rel="stylesheet" type="text/css" href="css/navigation-menu.css" />

    <!-- Custom - Theme CSS -->
    <link rel="stylesheet" type="text/css" href="style.css" />
    <link rel="stylesheet" type="text/css" href="css/shortcodes.css" />

    <!--[if lt IE 9]>
      <script src="js/html5/respond.min.js"></script>
    <![endif]-->
    <style>
      .social-icons {
        position: fixed;
        top: 90px;
        right: 0;
      }
      .social-icons a {
        display: inline-block;
        margin-left: 10px;
      }
      .page-banner{
			background-position: center;
			background-size: contain !important;
			background-image: url(images/blog-single-banner.jpg) !important;
			background-repeat: no-repeat;
			position: relative;
			text-align: center;
			min-height: 278px;
			align-content: center;
			width: 100%;
			min-height: unset;
		}
		.page-banner h2 {
			padding: 0px;
			font-size: 2.4em;
			line-height: 50px;
		}
		@media screen and (max-width: 700px) {
			.page-banner h2 {
				padding: 0px;
				font-size: 2.5em;
				line-height: 50px;
			}
			.page-banner{
			background-size: cover !important;
			background-position: left;
			background-image: url(images/blog-single-banner.jpg) !important;
			background-repeat: no-repeat;
			position: relative;
			text-align: center;
			align-content: center;
			width: 100%;
			height: 100%;
		}
        }
    </style>
  </head>

  <body data-offset="200" data-spy="scroll" data-target=".ow-navigation">
    <!-- Loader -->
    <div id="site-loader" class="load-complete">
      <div class="loader">
        <div class="loader-inner ball-clip-rotate">
          <div></div>
        </div>
      </div>
    </div>
    <!-- Loader /- -->

    <a id="top"></a>

	<!-- Header Section -->
	<header id="header" class="header-section container-fluid no-padding">
		<!-- SidePanel -->
		<div id="slidepanel">
			<!-- Top Header -->
			<div class="top-header container-fluid no-padding">
				<!-- Container -->
				<div class="container">
					<div class="row">
						<div class="col-md-7 col-sm-12">
							<p>Bienvenido a la renovación en la Educación</p>
						</div>
						<div class="col-md-5 col-sm-12">
							<a href="mailto:info@ourdomain.com" title="Info@ourdomain.com"><i class="fa fa-envelope"></i>admin@col8nov.com</a>
							<a href="tel:+011234567896" title="+011234567896"><i class="fa fa-phone"></i> (+593) 07 2976 015</a>
						</div>
					</div>
				</div><!-- Container -->
			</div><!-- Top Header /- -->
			<!-- Middel Header /- -->
			<div class="middle-header container-fluid no-padding">
				<div class="container">
					<div class="row">
						<div class="col-md-5">
							<a href="index.html" title="8 de Noviembre"><img src="images/logo.png" alt="Logo" /></a>
						</div>
						<div class="col-md-7 col-sm-12 header-content">
							<div class="header-cnt-box">
								<i class="fas fa-graduation-cap"></i>
								<button style="background-color: #d20f26; color: #fff; border-radius: 4px; padding: 10px 20px; font-size: 16px;" onclick="window.open('https://8noviembre.sharepoint.com/sites/8nov', '_blank')">PLATAFORMA</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div><!-- SidePanel /- -->
		<!-- Container -->
		<div class="container">
			<!-- nav -->
      <nav class="navbar navbar-default ow-navigation" id="menu-Navbar">
				<div id="loginpanel" class="desktop-hide">
					<div class="right" id="toggle">
						<a id="slideit" href="#slidepanel"><i class="fo-icons fa fa-inbox"></i></a>
						<a id="closeit" href="#slidepanel"><i class="fo-icons fa fa-close"></i></a>
					</div>
				</div>
				<div class="navbar-header">
					<button aria-controls="navbar" aria-expanded="false" data-target="#navbar" data-toggle="collapse" class="navbar-toggle collapsed" type="button">
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
					<a href="index.html" title="8 de Noviembre" class="navbar-brand">8 de Noviembre</a>
				</div>
				<div class="navbar-collapse collapse" id="navbar">
					<ul class="nav navbar-nav">
						<li><a href="index.html" title="INICIO">INICIO</a></li>
						<li class="dropdown">
							<a href="about.html" title="¿Quienes Somos?" class="dropdown-toggle" role="button" aria-haspopup="true" aria-expanded="false">¿QUIÉNES SOMOS?</a>
							<i class="ddl-switch fa fa-angle-down"></i>
							<ul class="dropdown-menu">
								<li><a href="about.html#propositoMisional">Propósito Misional</a></li>
								<li><a href="about.html#comunidad">Nuestra Historia</a></li>
								<li><a href="about.html#instrumentosGestion">Instrumentos de Gestión Escolar</a></li>
                <li><a href="about.html#uniformeInstitucional">Uniforme Institucional</a></li>
                <li><a href="about.html#simbolosInstitucionales">Simbolos Institucionales</a></li>
							</ul>
						</li>
						<li class="dropdown">
							<a href="#" title="OFERTA EDUCATIVA" class="dropdown-toggle" role="button" aria-haspopup="true" aria-expanded="false">OFERTA EDUCATIVA</a>
							<i class="ddl-switch fa fa-angle-down"></i>
							<ul class="dropdown-menu">
								<li><a href="egbs.html" title="EGBS">Educación General Básica Superior </a></li>
								<hr>
								<li><a href="agro.html" title="Produccion Agropecuaria">Producción Agropecuaria</a></li>
								<li><a href="mecanica.html" title="Mecanizado">Mecanizado y Construcciones Metálicas</a></li>
                                <li><a href="ciencias.html" title="Ciencias">Bachillerato en Ciencias</a></li>

							</ul>
						</li>
						<li class="dropdown">
							<a href="#" title="DIRECTIVOS Y DOCENTES" class="dropdown-toggle" role="button" aria-haspopup="true" aria-expanded="false">DIRECTIVOS Y DOCENTES</a>
							<i class="ddl-switch fa fa-angle-down"></i>
							<ul class="dropdown-menu">
								<li><a href="docentes.html" title="EGBS">Directivos Institucionales</a></li>
								<li><a href="docentes.html?cargo=docentes" title="Produccion Agropecuaria">Personal Docente</a></li>
								<li><a href="docentes.html?cargo=dece" title="Mecanizado">Departamento de Consejería Estudiantil</a></li>
                                <li><a href="administrativo.html" title="Administrativo y de Apoyo">Administrativo y de Apoyo</a></li>
							</ul>
						</li>
						<li class="dropdown">
							<a href="#" title="Proyectos" class="dropdown-toggle" role="button" aria-haspopup="true" aria-expanded="false">Proyectos</a>
							<i class="ddl-switch fa fa-angle-down"></i>
							<ul class="dropdown-menu">
								<li><a href="proyectos.html?proyecto=ex-alumnos" title="Proyectos de Ex-Alumnos">Ex-Alumnos</a></li>
								<li><a href="proyectos.html?proyecto=productivos" title="Proyectos Productivos">Productivos</a></li>
								<li><a href="proyectos.html?proyecto=ambientales" title="Proyectos Ambientales">Ambientales</a></li>
								<li><a href="proyectos.html?proyecto=culturales" title="Proyectos Culturales">Culturales</a></li>
                                <li><a href="proyectos.html?proyecto=deportivos" title="Proyectos Deportivos">Deportivos</a></li>
                                <li><a href="proyectos.html?proyecto=educativos" title="Proyectos Educativos">Educativos</a></li>
                                <li><a href="proyectos.html?proyecto=participacion" title="Proyectos Participación Estudiantil">Programas de Participación Estudiantil</a></li>
							</ul>
						</li>
						<li class="dropdown">
							<a href="#" title="Proyectos" class="dropdown-toggle" role="button" aria-haspopup="true" aria-expanded="false">Recursos</a>
							<i class="ddl-switch fa fa-angle-down"></i>
							<ul class="dropdown-menu">
								<li><a href="biblioteca.html" title="Biblioteca" class="activeList">Biblioteca</a></li>
								<li><a href="#" title="Proyectos Culturales">Documentos</a></li>
							</ul>
						</li>
						<li><a href="blog.html" title="Blog">Blog</a></li>
						<li><a href="contact-us.html" title="Contactenos">CONTÁCTENOS</a></li>
					</ul>
				</div><!--/.nav-collapse -->
			</nav><!-- nav /- -->
		</div><!-- Container /- -->
	</header><!-- Header Section /- -->

    <main class="site-main page-spacing">
      <!-- Page Banner Section -->
      <div class="page-banner blog-single-banner container-fluid no-padding" id="page-banner">
        <h2>Blog de novedades</h2>
      </div>
      <!-- Banner Section /- -->

      <div class="section-padding"></div>

      <!-- Blog Section -->
      <div class="container-fluid no-padding blog-single">
        <!-- container -->
        <div class="container">
          <div class="row">
            <!-- Content Area -->
            <div class="content-area col-md-8 col-sm-7">
              <article class="type-post">
                <div class="entry-content">
                  <h3 class="entry-title" id="tituloLibro"></h3>
                  <div id="portada"></div>
                  <div class="entry-meta" id="informacion-libro">
                    <div>
                      Autor: <a href="#" title="autor"></a>
                    </div>
                    <div>
                      <a href="#" title="Comments"> Luis Aguirre</a>
                    </div>
                    <div>
                      <a href="#" title="11 Likes">11 Likes</a>
                    </div>
                  </div>
                  <div id="resumen-libro"></div>
                  <div id="archivo-adjunto"></div>
                </div>
                <div class="post-social">
                  <h4>Compartir el post</h4>
                  <ul>
                    <li>
                      <a href="#" title="Facebook"
                        ><i class="fa fa-facebook"></i
                      ></a>
                    </li>
                    <li>
                      <a href="#" title="Twitter">
                        <i class="fa-brands fa-x-twitter"></i>
                      </a>
                    </li>
                    <li>
                      <a href="#" title="WhatsApp">
                        <i class="fa fa-whatsapp"></i>
                      </a>
                    </li>
                  </ul>
                </div>
              </article>
              <!-- About Author -->
              <div class="about-author">
                <img
                  alt="author"
                  width="176"
                  height="176"
                  src="images/proyectos/biblioteca-digital.png"
                />
                <a href="proyectos/detalles.html?id=3">Elaboración del catálogo digital de la biblioteca</a>
                <p>
                  Un grupo de estudiantes de nuestra institución llevó a cabo un proyecto innovador que ha revolucionado la manera en la que se gestiona y accede a la información en su biblioteca.
                </p>
                <ul>
                  <li>
                    <a href="#" title="Facebook"
                      ><i class="fa fa-facebook"></i
                    ></a>
                  </li>
                  <li>
                    <a href="#" title="Twitter">
                      <i class="fa-brands fa-x-twitter"></i>
                    </a>
                  </li>
                  <li>
                    <a href="#" title="WhatsApp">
                      <i class="fa fa-whatsapp"></i>
                    </a>
                  </li>
                </ul>
              </div>
              <!-- About Author /- -->
            </div>
            <!-- Content Area /- -->
            <!-- Widget Area -->
            <div class="col-md-4 col-sm-5 widget-area">
              <!-- Widget Search -->
              <aside class="widget widget_search">
                <h3 class="widget-title">Buscar</h3>
                <div class="input-group">
                  <input id="titulo-libro"
                    type="text"
                    placeholder="Busca un libro"
                    class="form-control"
                  />
                  <span class="input-group-btn">
                    <button id="buscar-libro" type="button" class="btn btn-default">
                      <i class="icon icon-Search"></i>
                    </button>
                  </span>
                </div>
              </aside>
              <!-- widget Search /- -->
              <!-- Widget Categories -->
              <aside class="widget widget_categories">
                <h3 class="widget-title">Libros Recomendados</h3>
                <ul id="libros-recomendados"></ul>
              </aside>
              <!-- Widget Categories -->
              <!-- Widget Posts -->
              <aside class="widget widget_posts">
                <h3 class="widget-title">Ultimos Proyectos</h3>
              </aside>
              <!-- Widget Posts -->
              <!-- Widget Posts -->
              <aside class="widget widget_tags">
                <h3 class="widget-title">Actividades populares</h3>
                <div class="tags" id="tags">
                </div>
              </aside>
              <!-- Widget Posts -->
            </div>
            <!-- Widget Area /- -->
          </div>
        </div>
        <!-- container /- -->
        <div class="section-padding"></div>
      </div>
      <!-- Client Section -->
      <div class="client-section container-fluid no-padding">
        <!-- Container -->
        <div class="container">
          <div class="client-carousel">
            
          </div>
        </div><!-- Container /- -->
      </div><!-- Client Section /- -->
      <br><br>
      <!-- Latest News Section /- -->
    </main>

	<!-- Footer Section -->
	<div class="footer-section container-fluid no-padding">
		<!-- Container -->
		<div class="container">
			<div class="footer-callout">
				<h4><img src="images/footer-callout-ic.png" width="44" height="40" alt="Call Out Ic" /> <span>por nuestra <b>excelencia</b> Académica</span></h4>
				<a href="contact-us.html" title="contact us">CONTÁCTENOS</a>
			</div>
			
		</div><!-- Container /- -->
		<div class="footer-bottom container-fluid no-padding">
			<div class="container">
				<div class="row">
					<div class="col-md-2 col-sm-12 col-xs-12">
						<p>&copy; 2024- 8 de Noviembre</p>
					</div>
					<div class="col-md-10 col-sm-12 col-xs-12">
						<!-- nav -->
						<nav class="navbar navbar-default ow-navigation">
							<div class="navbar-header">
								<button aria-controls="navbar" aria-expanded="false" data-target="#ftr-navbar" data-toggle="collapse" class="navbar-toggle collapsed" type="button">
									<span class="sr-only">Toggle navigation</span>
									<span class="icon-bar"></span>
									<span class="icon-bar"></span>
									<span class="icon-bar"></span>
								</button>
							</div>
							<div class="navbar-collapse collapse navbar-right" id="ftr-navbar">
								<ul class="nav navbar-nav">
									<li><a href="index.html" title="home">INICIO</a></li>
									<li><a href="contact-us.html" title="Contact Us">CONTÁCTENOS</a></li>
								</ul>
							</div><!--/.nav-collapse -->
						</nav><!-- nav /- -->
					</div>
				</div>
			</div>
		</div>
	</div><!-- Footer Section /- -->

    <!-- JQuery v1.11.3 -->
    <script src="js/jquery.min.js"></script>

    <!-- Library JS -->
    <script src="libraries/lib.js"></script>

    <!-- Library - Theme JS -->
    <script src="js/functions.js"></script>

    <script>
      $(document).ready(function(){

        function cargarLibros(){
          var archivoJSON = 'static/biblioteca.json';
          var librosFiltrados;
          var datosJSON; 
          // Realizar la solicitud para obtener el archivo JSON utilizando fetch
          fetch(archivoJSON)
              .then(response => {
                  // Verificar si la solicitud fue exitosa
                  if (!response.ok) {
                      throw new Error('La solicitud no fue exitosa');
                  }
                  // Convertir la respuesta a un objeto JSON
                  return response.json();
              })
              .then(datos => {
                  // Asignar los datos a la variable global
                  mostrarInformacion(datos);
                  recomendarLibros(datos);
                  return datosJSON = datos;

                  
              })
              .catch(error => {
                  console.error('Ocurrió un error:', error);
              });
        }

        function recomendarLibros(data){
          var librosLista;
          var urlParams = new URLSearchParams(window.location.search);
          var codigo_get = urlParams.get('id'); 
          var libroPost;
          var filtroAmbito;
          var filtroAutor;
          var filtroCodigo;
          librosLista = data;
          libroPost = librosLista.find(function(elemento) {
            return elemento["ID"].replace(/\s/g, "") === codigo_get;
          });
          var ambito = libroPost["AMBITO"];
          var autores = libroPost["AUTORES"];
          codigo_get = codigo_get.replace(/\s/g, "");
          var codigoEstante = libroPost["CODIGO"][0];
          filtroAmbito = obtenerElementosAleatorios(librosLista,5,"AMBITO", ambito);
          filtroAutor = obtenerElementosAleatorios(librosLista,5,"AUTORES", autores);
          filtroCodigo = obtenerElementosAleatorios(librosLista,5,"CODIGO", codigoEstante);
           

          var jsonFinal = filtroAmbito.concat(filtroAutor, filtroCodigo).flat();

          librosAleatorios = obtenerElementosAleatorios(librosLista,5,"",""); 

          librosAleatorios.map(function(libros){ 
            $("#libros-recomendados").append(`<li><a href='libros.html?id=${libros["ID"].replace(/\s/g, "")}' title='Building'>${libros["TITULO LIBRO"].toLocaleLowerCase()}</a></li>`);
          });

        }

        function mostrarProyectosNuevos(){
          var archivoProyectos = '../static/proyectos.json';
            fetch(archivoProyectos)
            .then(response =>{
              if(!response.ok){
                throw new Error('La solicitud no fue exitosa');
              }
              return response.json();
            })
            .then(datos=>{
                ordenarProyectosFecha(datos);
            }).catch(error => {
              console.error('Ocurrió un error:', error);
            });
        }

        function ordenarProyectosFecha(json){
          var listaOrdenada = json.map(item => {
            // Desestructurar el objeto y mantener todas las propiedades
            let { "fecha inicio": fechaInicio, ...restoPropiedades } = item;
            // Si hay fecha inicio, la convertimos a un objeto Date
            if (fechaInicio !== "") {
              var partesFecha = fechaInicio.split('/');
              fechaInicio = new Date(partesFecha[2], partesFecha[1] - 1, partesFecha[0]); // Año, mes, día
            }
            // Retornar un nuevo objeto con la fecha inicio modificada y el resto de las propiedades intactas
            return {
                "fecha inicio": fechaInicio,
                ...restoPropiedades
            };
        });

          // Ordenar los elementos por fecha de forma descendente
          listaOrdenada.sort((a, b) => b.fecha - a.fecha);

          // Agregar elementos sin fecha al final del array ordenado
          var ultimosPost="";
          for(i=0;i< 3;i++){
            if(listaOrdenada[i]["fecha inicio"]){
              var fecha = listaOrdenada[i]["fecha inicio"];
              $(".widget_posts").append(`<div class="latest-content">
                    <a title="${listaOrdenada[i]["tema"]}" href="proyectos/detalles.html?id=${listaOrdenada[i]["id"]}" target="_blank"><img alt="latest-post-${listaOrdenada[i]["id"]}" width="79" height="79" src="../images/proyectos/${listaOrdenada[i]["portada"]}"></a>
                    <h3>
                      <a title="${listaOrdenada[i]["tema"]}" href="proyectos/detalles.html?id=${listaOrdenada[i]["id"]}" target="_blank">${listaOrdenada[i]["tema"]}
                      </a>
                    </h3>
                    <span style="text-transform: capitalize;">${fecha.toLocaleString('es-ES', { month: 'long' })} ${fecha.getDate()},${fecha.getFullYear()}</span>
                  </div>`);
            }
          }
        }
        
        function mostrarInformacion(data){
          
          var archivoBlogs = '../static/blogs.json';
          fetch(archivoBlogs)
          .then(response =>{
            if(!response.ok){
              throw new Error('La solicitud no fue exitosa');
            }
            return response.json();
          })
          .then(datos=>{
            obtenerEtiquetas(datos);
          }).catch(error => {
            console.error('Ocurrió un error:', error);
          });

          var librosLista = data;
          
          var urlParams = new URLSearchParams(window.location.search);
          var codigo_get = urlParams.get('id'); 
          libroPost = librosLista.find(function(elemento) {
            return elemento["ID"].replace(/\s/g, "") === codigo_get;
          });
          var enlaceDescarga = "";
          enlaceDescarga = (isNaN(libroPost["LINK"])) ? libroPost["LINK"] : "";

          
          let fechaPublicacion = libroPost["PUBLICACION"];
          fechaPublicacion = fechaFomart(fechaPublicacion);
          $("#tituloLibro").text(libroPost["TITULO LIBRO"]);
          $("#portada").html(`<center><img src="images/libros/${libroPost["IMAGEN"].replace(/\s/g, "")}" onerror="this.style.display='none';" height="400" style="
              justify-content: center;
              align-self: center;
              height: 407px;
              margin-bottom: 26px;
          "></center>`);
          $("#informacion-libro").html(`<div class="">
                      Autor: <a href="biblioteca.html?autor=${libroPost["AUTORES"]}" title="Autor">${libroPost["AUTORES"]}</a>
                    </div>
                    <div class="">
                      <a href="biblioteca.html?categoria=${libroPost["AMBITO"]}" title="Categoria"> ${libroPost["AMBITO"]}</a>
                    </div>
                    <div class='post-comment'>
                      <a title=' Fecha de publicación'>Publicación: ${fechaPublicacion}</a>
                      </div>
                    <div class="">
                      <a title="Código">${libroPost["CODIGO"]}</a>
                    </div>`);
          $("#resumen-libro").html(`<p>${libroPost["RESUMEN"].replace(/\n/g, "<br><br>")}</p>`)

          if(enlaceDescarga){
            $("#archivo-adjunto").html(`
            <h3 style="color: #222222;font-size: 20px;font-weight: 800;letter-spacing: 1.4px;margin-bottom: 20px;margin-top: 10px;text-transform: uppercase;"">Enlace de descarga</h3>
            <ul style="color: #777777;letter-spacing: 0.64px;line-height: 26px;margin-bottom: 30px;">
              <li><a href="${libroPost["LINK"]}" target="_blank">${libroPost["TITULO LIBRO"]}<i class="fa fa-download" aria-hidden="true"></i></a></li>
            </ul>
            `);
          }
        }

        // Función para obtener elementos aleatorios
        function obtenerElementosAleatorios(json, cantidad, filtro, busqueda) {
          var listaFiltro;
          var elementosAleatorios = [];
          var indicesAleatorios = [];

          if(filtro=="" && busqueda==""){
            listaFiltro = json;
          }else{
            listaFiltro = json.filter(function(libro){
              return libro[filtro].includes(busqueda);  
            });
          }

          if(cantidad > listaFiltro.length){
            cantidad = listaFiltro.length;
          }
          
          while (indicesAleatorios.length < cantidad) {
            var indice = Math.floor(Math.random() * listaFiltro.length);
            if (!indicesAleatorios.includes(indice)) {
              indicesAleatorios.push(indice);
            }
          }
          
          // Obtener elementos correspondientes a los índices aleatorios
          for (var i = 0; i < indicesAleatorios.length; i++) {
            elementosAleatorios.push(listaFiltro[indicesAleatorios[i]]);
          }
            
          return elementosAleatorios;

        }
      
        function escogerFrase(){
          var archivoFrases = 'static/frases.json';
          var frasesJson;
    
          if(!localStorage.getItem('datosFrases')){
            fetch(archivoFrases)
            .then(response =>{
              if(!response.ok){
                throw new Error('La solicitud no fue exitosa');
              }
              return response.json();
            })
            .then(datos=>{
              frasesJson = datos;
              localStorage.setItem('datosFrases',JSON.stringify(datos));
              fraseAleatoria(frasesJson);
            }).catch(error => {
              console.error('Ocurrió un error:', error);
            });
          }else{
            frasesJson = JSON.parse(localStorage.getItem('datosFrases'));
            fraseAleatoria(frasesJson);
          }
        }
        function fraseAleatoria(datosJSON){
          var tipo = "lectura";
          var listaFiltro;
          var frase;
          listaFiltro = datosJSON.filter(function(libro){
            return libro["Tipo"].includes(tipo);
          });
          var indice = Math.floor(Math.random() * listaFiltro.length);
          frase = listaFiltro[indice];
    
          $("#page-banner").html(`<h2>"${frase["Frase"]}." - ${frase["Autor"]}</h2>`);
        }

        function fechaFomart(numeroExcel){
          if(numeroExcel == ""){
              return "";
          }
          // Convierte el formato de fecha de excel a javascript
          // Diferencia de días entre la fecha de referencia de Excel y la de JavaScript
          numeroExcel = parseInt(numeroExcel);
          var diasDiferencia = 25568; // Esta es la cantidad de días entre el 1 de enero de 1900 y el 1 de enero de 1970
      
          // Calcular la fecha
          var fecha = new Date((numeroExcel - diasDiferencia) * 86400000); // 86400000 = cantidad de milisegundos en un día
          fecha = `${fecha.getDate()}/${fecha.getMonth()+1}/${fecha.getFullYear()}`; 
          return fecha;
        }
		

        $("#buscar-libro").click(function(){
          var titulo = $("#titulo-libro").val();
          var ruta = "biblioteca.html?titulo="+titulo;
          window.location.href = ruta;
        });

        $("#titulo-libro").keypress(function(event) {
            if (event.which === 13) { // 13 es el código de la tecla Enter
              var titulo = $("#titulo-libro").val();
              var ruta = "biblioteca.html?titulo="+titulo;
              window.location.href = ruta;
            }
        });

        var imagen = new Image();
			imagen.src = "images/blog-single-banner.jpg";
			imagen.onload = function() {
				var imagenAncho = this.width;
				var imagenAlto = this.height;
				var aspectoImagen =  imagenAncho / imagenAlto;
				aspectoImagen = ""+aspectoImagen+"";
				// Calcular la altura del div en función del ancho de la pantalla y el tamaño
				// Establecer la altura del div
				$('#page-banner').css("aspect-ratio",aspectoImagen);
			}


      function seleccionarElementosAleatorios(lista) {
          // Verificar si la lista tiene menos de 8 elementos
          if (lista.length <= 8) {
              return lista; // Devolver la lista original si tiene 8 o menos elementos
          }

          var elementosSeleccionados = []; // Lista para almacenar los elementos seleccionados
          var indicesSeleccionados = {}; // Objeto para rastrear los índices seleccionados

          // Mientras la lista de elementos seleccionados no tenga 8 elementos
          while (elementosSeleccionados.length < 8) {
              // Generar un índice aleatorio dentro del rango de la lista
              var indice = Math.floor(Math.random() * lista.length);
              
              // Verificar si este índice ya fue seleccionado
              if (!indicesSeleccionados[indice]) {
                  // Agregar el elemento correspondiente al índice a la lista de elementos seleccionados
                  elementosSeleccionados.push(lista[indice]);
                  // Marcar el índice como seleccionado
                  indicesSeleccionados[indice] = true;
              }
          }

          return elementosSeleccionados;
      }

      function obtenerEtiquetas(datos){
          var palabrasUnicas = {};
          // Iterar sobre cada elemento del JSON
          datos.forEach(function(elemento) {
              // Iterar sobre cada palabra en la lista de etiquetas del elemento
              elemento["etiquetas"].forEach(function(palabra) {
                  // Agregar la palabra al objeto de palabras únicas
                  palabrasUnicas[palabra] = true;
              });
          });

          // Obtener las palabras únicas del objeto
          var listaPalabras = Object.keys(palabrasUnicas); 
          listaPalabras = seleccionarElementosAleatorios(listaPalabras);
          // Mostrar la lista de palabras
          listaPalabras.forEach(function(etiqueta){
            $("#tags").append(`<a href="blog.html?etiquetas=${etiqueta}" title="${etiqueta}">${etiqueta}</a>`)
          })
        }

        function logosSponsor(){
			fetch("static/aprocinadores.json")
			.then(response =>{
				if (!response.ok) {
					throw new Error('La solicitud no fue exitosa');
				}
				return response.json();
			})
			.then(data =>{
				data.map(function(sponsor){
					let nombre = sponsor.nombre;
					let logo = sponsor.logo;
					let link = sponsor.link;

					$(".client-carousel").prepend(`<a href="${link}" title="Logo"><img src="images/sponsor/${logo}" height="80" alt="${nombre}" /></a>`);
				});
			}).then(data =>{
				carrusel();
			})
			
			
		}
		
		function carrusel(){
			if( $(".client-section").length ) {
			$(".client-carousel").owlCarousel({
				loop: true,
				nav: true,
				dots: false,
				margin: 0,
				smartSpeed: 200,				
				autoplay: true,
				responsive:{
					0:{
						items: 2
					},
					480:{
						items: 3
					},
					640:{
						items: 3
					},
					992:{
						items: 6
					}
				}
			})
			
			$(".client-section").each(function () {
				var $this = $(this);
				var myVal = $(this).data("value");
				$this.appear(function() {
					$(".client-section").addClass( "animated bounceInLeft");
				});
			});
		}
		};
		logosSponsor();

        cargarLibros();
        escogerFrase();
        mostrarProyectosNuevos();
      });




    </script>

    <div class="social-icons">
      <a href="https://www.facebook.com/Col8deNoviembre?mibextid=ZbWKwL" target="_blank"
        ><img src="images/Facebook.png" alt="Facebook"
      /></a>
    </div>
  </body>
</html>
